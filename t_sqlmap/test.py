#from common.parsers.urls import get_urls

from urllib.parse import urlparse 


# Parse urls

url = "https://0a0b00c8048145bec03d9870001d000e.web-security-academy.net/"

targets = [
    "https://portswigger.net/web-security/sql-injection/lab-retrieve-hidden-data",
    "/",
    "/filter?category=Accessories",
    "/filter?category=Clothing%2c+shoes+and+accessories",
    "/filter?category=Corporate+gifts",
    "/filter?category=Food+%26+Drink",
    "/product?productId=9",
    "/product?productId=14",
    "/product?productId=19",
    "/product?productId=6",
    "/product?productId=11",
    "/product?productId=16",
    "/product?productId=7",
    "/product?productId=12",
    "/product?productId=17",
    "/product?productId=10",
    "/product?productId=15",
    "/product?productId=20"
]
#targets = list(get_urls(requests.get(url).text))
import json


print(json.dumps(targets,indent=4))

for url in targets:

    parsed_url = urlparse(url)

    #print(json.dumps(dict(parse_qsl(parsed_url.query)),indent=4))


# import asyncio
# TOOLS = []

# loop = asyncio.get_event_loop()
# loop.run_until_complete(asyncio.gather(*TOOLS))


from sqlmap import sqlmap

urls = ['https://0abe008204ea43e6c07cec2400ca0037.web-security-academy.net/']

for url in urls:
    params = {
        'url': url,
        'data': {
            'param1': 'value1',
            'param2': 'value2'
        }
    }
    #sqlmap.