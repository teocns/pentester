import subprocess

class Shell(object):
    
    ATTACH_CMD = ''

    _process: subprocess.Popen 

    def __init__(self, cmd) -> None:
        self._process = subprocess.Popen(['bash', '-c', cmd], stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE, shell=False)

    def get_attach_cmd():
        raise NotImplementedError()


    def cmd(self, input, timeout = None):
        return self._process.communicate(input,timeout)

    @classmethod
    def attach(cls, host='localhost'):
        if host != 'localhost':
            # SSH logic
            raise NotImplementedError("Must implement SSH connection logic")
        
        return cls(cls.ATTACH_CMD)


# docker needs to be added in $PYTHONPATH







