
from enum import Enum
from celery import Celery
from config import RABBITMQ_HOST, REDIS_HOST




class Tasks(str, Enum):
    """
    Factory for creating workers.
    """
    XSSER = 'xsser.run'


    def __repr__(self) -> str:
        return self.value

    def __str__(self):
        return str(self.value)



class Task(object):
    """
    Factory for creating workers task.
    """
    def __init__(self, callback) -> None:
        pass
    




def create_app(worker_name):
    app = Celery(worker_name, broker='amqp://guest:guest@%s//' % RABBITMQ_HOST, backend='redis://%s/0' % REDIS_HOST)
    app.config_from_object('workers.conf')

    app.conf.update(
        task_serializer="json",
        result_serializer="json",
        accept_content=["json"]
    )

