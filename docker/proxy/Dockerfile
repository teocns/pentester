# Nginx



# Pulling base image
FROM ubuntu:18.04

# Install TIDoS-Framework dependencies
RUN apt update && \
    apt install --install-recommends -y \
    sudo \
    nginx \ 
    build-essential \ 
    python3 \
    python-dev \
    python3-pip \
    curl






CMD mkdir /usr/src/app

ADD proxy/ /usr/src/app/
ADD proxy/nginx.conf /etc/nginx/sites-available/proxy.conf

RUN pip3 install -r /usr/src/app/requirements.txt

RUN rm /etc/nginx/sites-enabled/default && \
    ln -s /etc/nginx/sites-available/proxy.conf /etc/nginx/sites-enabled/proxy.conf
    # echo "daemon off;" >> /etc/nginx/nginx.conf

# Append "dameon off;" to the end of the nginx.conf file


WORKDIR /usr/src/app

# CMD service nginx start & uwsgi --ini uwsgi.ini
# CMD sleep inifinity

#ENTRYPOINT ["bash"]